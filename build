# Compile the Assembly file that loads the C kernel
nasm -f elf32 kernel.asm -o kasm.o

# Compile the C code
gcc -m32 -c kernel.c -o kc.o -ffreestanding

# Link the Assembly and C code together to form a .bin file
ld -m elf_i386 -T link.ld -o iso/boot/kernel.bin kasm.o kc.o

# Clean up by removing the .o files
rm *.o

# Emulate the operating system using QEMU
qemu-system-i386 -kernel iso/boot/kernel.bin

# Generate an ISO image
# grub-mkrescue -o bdos.iso iso/
